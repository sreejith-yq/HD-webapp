# wrangler.toml
name = "healthy-dialogue-api"
main = "src/index.ts"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# Environment variables (use wrangler secret for sensitive data)
# wrangler secret put JWT_SECRET
# wrangler secret put DATABASE_URL

[vars]
API_URL = "https://api.healthydialogue.com"
ENVIRONMENT = "production"

# R2 bucket binding
[[r2_buckets]]
binding = "MEDIA_BUCKET"
bucket_name = "healthy-dialogue-media"

# KV Namespace binding
[[kv_namespaces]]
binding = "AUTH_SESSION"
id = "YOUR_KV_NAMESPACE_ID" # TODO: Update with actual KV ID

# Development environment
[env.dev]
name = "healthy-dialogue-api-dev"
[env.dev.vars]
API_URL = "http://localhost:8787"
ENVIRONMENT = "development"
DATABASE_URL = "postgres://authenticated@localhost:5432/main"

# Staging environment
[env.staging]
name = "healthy-dialogue-api-staging"
[env.staging.vars]
API_URL = "https://api-staging.healthydialogue.com"
ENVIRONMENT = "staging"
